(()=>{var e,t,a,r,s,n,o={70926:(e,t,a)=>{"use strict";var r=a(70375);async function s(){try{if(!await navigator.gpu.requestAdapter())throw Error("WebGPU is not supported (no adapter found)")}catch(e){self.postMessage({status:"error",data:e.toString()})}}class n{static{this.model_id="onnx-community/Qwen3-0.6B-ONNX"}static async getInstance(e=null){return this.tokenizer??=r.v6I.from_pretrained(this.model_id,{progress_callback:e}),this.model??=r.W6E.from_pretrained(this.model_id,{dtype:"q4f16",device:"webgpu",progress_callback:e}),Promise.all([this.tokenizer,this.model])}}let o=new r.dYU,i=null;async function c({messages:e,reasonEnabled:t}){let a,s,[c,l]=await n.getInstance(),p=c.apply_chat_template(e,{add_generation_prompt:!0,return_dict:!0,enable_thinking:t}),[u,d]=c.encode("<think></think>",{add_special_tokens:!1}),f="answering",g=0,_=new r.T1P(c,{skip_prompt:!0,skip_special_tokens:!0,callback_function:e=>{self.postMessage({status:"update",output:e,tps:s,numTokens:g,state:f})},token_callback_function:e=>{switch(a??=performance.now(),g++>0&&(s=g/(performance.now()-a)*1e3),Number(e[0])){case u:f="thinking";break;case d:f="answering"}console.log(f,e,c.decode(e))}});self.postMessage({status:"start"});let{past_key_values:b,sequences:m}=await l.generate({...p,past_key_values:i,do_sample:!0,top_k:20,temperature:t?.6:.7,max_new_tokens:16384,streamer:_,stopping_criteria:o,return_dict_in_generate:!0});i=b;let h=c.batch_decode(m,{skip_special_tokens:!0});self.postMessage({status:"complete",output:h})}async function l(){self.postMessage({status:"loading",data:"Loading model..."});let[e,t]=await n.getInstance(e=>{self.postMessage(e)});self.postMessage({status:"loading",data:"Compiling shaders and warming up model..."});let a=e("a");await t.generate({...a,max_new_tokens:1}),self.postMessage({status:"ready"})}self.addEventListener("message",async e=>{let{type:t,data:a}=e.data;switch(t){case"check":s();break;case"load":l();break;case"generate":o.reset(),c(a);break;case"interrupt":o.interrupt();break;case"reset":i=null,o.reset()}})}},i={};function c(e){var t=i[e];if(void 0!==t)return t.exports;var a=i[e]={exports:{}},r=!0;try{o[e](a,a.exports,c),r=!1}finally{r&&delete i[e]}return a.exports}c.m=o,c.x=()=>{var e=c.O(void 0,[6929,1091,4322],()=>c(70926));return c.O(e)},e=[],c.O=(t,a,r,s)=>{if(a){s=s||0;for(var n=e.length;n>0&&e[n-1][2]>s;n--)e[n]=e[n-1];e[n]=[a,r,s];return}for(var o=1/0,n=0;n<e.length;n++){for(var[a,r,s]=e[n],i=!0,l=0;l<a.length;l++)(!1&s||o>=s)&&Object.keys(c.O).every(e=>c.O[e](a[l]))?a.splice(l--,1):(i=!1,s<o&&(o=s));if(i){e.splice(n--,1);var p=r();void 0!==p&&(t=p)}}return t},c.d=(e,t)=>{for(var a in t)c.o(t,a)&&!c.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},c.f={},c.e=e=>Promise.all(Object.keys(c.f).reduce((t,a)=>(c.f[a](e,t),t),[])),c.u=e=>"static/chunks/"+(({1091:"ab3d95df",6929:"3b47c6e6"})[e]||e)+"."+({1091:"6f3717586955d336",4322:"f235457c7028990f",6929:"23defc940dda8019"})[e]+".js",c.miniCssF=e=>{},c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"u">typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.U=function(e){var t=new URL(e,"x:/"),a={};for(var r in t)a[r]=t[r];for(var r in a.href=e,a.pathname=e.replace(/[?#].*/,""),a.origin=a.protocol="",a.toString=a.toJSON=()=>e,a)Object.defineProperty(this,r,{enumerable:!0,configurable:!0,value:a[r]})},c.U.prototype=URL.prototype,c.tt=()=>(void 0===t&&(t={createScriptURL:e=>e},"u">typeof trustedTypes&&trustedTypes.createPolicy&&(t=trustedTypes.createPolicy("nextjs#bundler",t))),t),c.tu=e=>c.tt().createScriptURL(e),c.p="/_next/",a={926:1},c.f.i=(e,t)=>{a[e]||importScripts(c.tu(c.p+c.u(e)))},s=(r=self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push.bind(r),r.push=e=>{var[t,r,n]=e;for(var o in r)c.o(r,o)&&(c.m[o]=r[o]);for(n&&n(c);t.length;)a[t.pop()]=1;s(e)},n=c.x,c.x=()=>Promise.all([6929,1091,4322].map(c.e,c)).then(n),_N_E=c.x()})();