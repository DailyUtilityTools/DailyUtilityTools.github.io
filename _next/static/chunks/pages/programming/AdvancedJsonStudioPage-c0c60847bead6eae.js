(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3829],{59650:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/programming/AdvancedJsonStudioPage",function(){return r(94093)}])},94093:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>z});var n=r(37876),o=r(14232),l=r(49106),i=r(1521),a=r(76686),s=r(82702),d=r(53019),c=r(47399),u=r(39852),x=r(9092),f=r(87210),p=r(99358),h=r(10850),y=r(92804),m=r(60895),j=r(25444),g=r(1673);function A({data:e}){let{rows:t,columns:r}=(0,o.useMemo)(()=>{if(!e)return{rows:[],columns:[]};let t=(Array.isArray(e)?e:[e]).slice(0,5e3),r=new Set,n=t.map((e,t)=>{if("object"!=typeof e||null===e)return{id:t,value:String(e)};let n=function e(t,r=""){let n={};for(let o in t){if(!Object.prototype.hasOwnProperty.call(t,o))continue;let l=r?`${r}.${o}`:o;if("object"!=typeof t[o]||null===t[o]||Array.isArray(t[o]))Array.isArray(t[o])?n[l]=JSON.stringify(t[o]):n[l]=t[o];else{let r=e(t[o],l);for(let e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}}return n}(e);return Object.keys(n).forEach(e=>r.add(e)),{id:t,...n}});return 0===r.size&&n.length>0&&void 0!==n[0].value?{rows:n,columns:[{field:"id",headerName:"Index",width:90},{field:"value",headerName:"Value",flex:1}]}:{rows:n,columns:[{field:"id",headerName:"ID",width:70},...Array.from(r).map(e=>({field:e,headerName:e,flex:1,minWidth:150,valueFormatter:e=>"object"==typeof e&&null!==e?JSON.stringify(e):e}))]}},[e]);return e?0===t.length?(0,n.jsx)(a.A,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",p:3,textAlign:"center"},children:(0,n.jsxs)(s.A,{color:"text.secondary",children:["Cannot map this JSON structure to a grid.",(0,n.jsx)("br",{}),"Grid view works best with Arrays of Objects."]})}):(0,n.jsx)(a.A,{sx:{height:"100%",width:"100%"},children:(0,n.jsx)(g.z,{rows:t,columns:r,density:"compact",disableRowSelectionOnClick:!0,initialState:{pagination:{paginationModel:{pageSize:100}}}})}):(0,n.jsx)(a.A,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)(s.A,{color:"text.secondary",children:"Empty Data"})})}var b=r(92181),v=r(6543),w=r(54406);function S({keyName:e,value:t,depth:r,isLast:i,defaultExpanded:d=r<2}){let c="dark"===(0,l.A)().palette.mode,[u,x]=(0,o.useState)(d),f=Array.isArray(t)&&t.length>0||"object"==typeof t&&null!==t&&Object.keys(t).length>0,p=null===t?c?"#f97878":"#d32f2f":"boolean"==typeof t?c?"#ff9d5c":"#e65100":"number"==typeof t?c?"#79c7e3":"#0277bd":"string"==typeof t?c?"#87d96b":"#2e7d32":Array.isArray(t)?c?"#ba8ff7":"#6a1b9a":"object"==typeof t?c?"#f0c060":"#f57f17":c?"#ccc":"#555",h=20*r,y=(0,o.useCallback)(()=>{f&&x(e=>!e)},[f]),m=f?(0,b.X4)(p,c?.08:.05):"transparent";return(0,n.jsxs)(a.A,{children:[(0,n.jsxs)(a.A,{onClick:f?y:void 0,sx:{display:"flex",alignItems:"center",gap:.5,pl:`${h+8}px`,pr:1,py:.35,borderRadius:1,cursor:f?"pointer":"default",backgroundColor:m,"&:hover":f?{backgroundColor:(0,b.X4)(p,c?.15:.1)}:{},transition:"background-color 0.15s"},children:[(0,n.jsx)(a.A,{sx:{width:18,height:18,display:"flex",alignItems:"center",flexShrink:0},children:f?u?(0,n.jsx)(w.A,{sx:{fontSize:16,color:p}}):(0,n.jsx)(v.A,{sx:{fontSize:16,color:p}}):null}),null!==e&&(0,n.jsxs)(s.A,{component:"span",sx:{fontFamily:"monospace",fontSize:"0.78rem",fontWeight:600,color:c?"#a0c4ff":"#1565c0",mr:.5,flexShrink:0},children:[e,":"]}),f?(0,n.jsx)(a.A,{sx:{display:"inline-flex",alignItems:"center",px:.7,py:.1,borderRadius:.8,backgroundColor:(0,b.X4)(p,.15),border:`1px solid ${(0,b.X4)(p,.3)}`},children:(0,n.jsx)(s.A,{component:"span",sx:{fontFamily:"monospace",fontSize:"0.73rem",color:p,fontWeight:700,lineHeight:1.3},children:null===t?"null":Array.isArray(t)?`Array[${t.length}]`:"object"==typeof t?`Object{${Object.keys(t).length}}`:typeof t})}):(0,n.jsx)(s.A,{component:"span",sx:{fontFamily:"monospace",fontSize:"0.78rem",color:p,wordBreak:"break-word"},children:function(e){if(null===e)return"null";if("string"==typeof e){let t=String(e);return`"${t.length>60?t.slice(0,60)+"…":t}"`}return String(e)}(t)})]}),f&&u&&(0,n.jsx)(a.A,{sx:{borderLeft:`1px solid ${(0,b.X4)(p,.25)}`,ml:`${h+16}px`},children:(()=>{if(Array.isArray(t)){let e=Math.min(t.length,200),o=[];for(let l=0;l<e;l++)o.push((0,n.jsx)(S,{keyName:String(l),value:t[l],depth:r+1,isLast:l===e-1&&t.length<=200,defaultExpanded:!1},l));return t.length>200&&o.push((0,n.jsx)(a.A,{sx:{pl:`${h+40}px`,py:.25},children:(0,n.jsxs)(s.A,{variant:"caption",sx:{color:"text.disabled",fontFamily:"monospace"},children:["… ",t.length-200," more items"]})},"overflow")),o}if("object"==typeof t&&null!==t){let e=Object.keys(t),o=Math.min(e.length,200),l=[];for(let i=0;i<o;i++){let a=e[i];l.push((0,n.jsx)(S,{keyName:a,value:t[a],depth:r+1,isLast:i===o-1&&e.length<=200,defaultExpanded:!1},a))}return e.length>200&&l.push((0,n.jsx)(a.A,{sx:{pl:`${h+40}px`,py:.25},children:(0,n.jsxs)(s.A,{variant:"caption",sx:{color:"text.disabled",fontFamily:"monospace"},children:["… ",e.length-200," more keys"]})},"overflow")),l}return null})()})]})}function k({data:e}){let t=(0,l.A)();return e?(0,n.jsx)(a.A,{sx:{width:"100%",height:"100%",overflow:"auto",p:1.5,fontFamily:"monospace",backgroundColor:t.palette.background.paper},children:(0,n.jsx)(S,{keyName:null,value:e,depth:0,isLast:!0,defaultExpanded:!0})}):(0,n.jsx)(a.A,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)(s.A,{color:"text.secondary",children:"Empty Data"})})}let O=null;async function C(){return O||(O=(async()=>{let e=await Promise.all([r.e(8513),r.e(8220),r.e(294),r.e(7604)]).then(r.t.bind(r,63334,23)),t=e.default??e;if("function"==typeof t&&(t=await t({})),t&&"function"==typeof t.then&&(t=await t),t&&"function"==typeof t.json)return t;if(t?.promised?.json)return t.promised;throw Error("jq-web: could not find json() method on loaded module. Module shape: "+JSON.stringify(Object.keys(t??{})))})())}let N="files",E="current_document",J=()=>new Promise((e,t)=>{let r=indexedDB.open("JsonStudioDB",1);r.onupgradeneeded=()=>{r.result.createObjectStore(N)},r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)}),_=async e=>{try{(await J()).transaction(N,"readwrite").objectStore(N).put(e,E)}catch(e){console.warn("Failed to save to DB",e)}},F=async()=>{try{let e=await J();return new Promise((t,r)=>{let n=e.transaction(N,"readonly").objectStore(N).get(E);n.onsuccess=()=>t(n.result),n.onerror=()=>r(n.error)})}catch(e){return null}},I=`{
  "project": "Next-Gen JSON Studio",
  "version": "1.0.0",
  "status": "development",
  "features": [
    "Monaco Editor",
    "IndexedDB Auto-Save",
    "WASM Parsers",
    "Agentic AI"
  ]
}`;function z(){let e=(0,l.A)(),t=(0,h.dJ)(),[r,g]=(0,o.useState)(""),[b,v]=(0,o.useState)(!1),[w,S]=(0,o.useState)(0),O=(0,o.useRef)(null),[N,E]=(0,o.useState)(""),[J,z]=(0,o.useState)(!1),D=(0,o.useRef)(null);(0,o.useEffect)(()=>{F().then(e=>{e?g(e):g(I),v(!0)})},[]);let P=(0,o.useCallback)(async()=>{let e=O.current?.value?.trim()||"";if(e&&r.trim())try{let t=JSON.parse(r);try{let r=await C(),n=await r.json(t,e);E(JSON.stringify(n,null,2))}catch(e){E(`JQ Error:
${e.message||String(e)}`)}}catch(e){E("Invalid source JSON. Please fix syntax errors in the editor first.")}},[r]);(0,o.useEffect)(()=>{if(!r)return;let e=setTimeout(()=>P(),1200);return()=>clearTimeout(e)},[r,P]);let B=(0,o.useCallback)(()=>{(O.current?.value?.trim()||0)&&(B.__timer&&clearTimeout(B.__timer),B.__timer=setTimeout(()=>{P()},1200))},[P]),T=async e=>{let t=e.target.files?.[0];if(t)if(z(!0),t.size>0xa00000){let e=0,r="",n=()=>{let o=t.slice(e,e+1048576),l=new FileReader;l.onload=o=>{r+=o.target?.result,(e+=1048576)<t.size&&e<0x3200000?requestAnimationFrame(n):(e<t.size&&(r+="\n\n/* File truncated at 50MB to protect memory... */"),g(r),_(r),z(!1))},l.readAsText(o)};n()}else{let e=new FileReader;e.onload=e=>{let t=e.target?.result;g(t),_(t),z(!1)},e.readAsText(t)}};return b?(0,n.jsxs)(i.A,{maxWidth:"xl",sx:{height:"calc(100vh - 100px)",display:"flex",flexDirection:"column",py:2},children:[(0,n.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,n.jsx)(s.A,{variant:"h4",fontWeight:"bold",children:"Advanced JSON Studio"}),(0,n.jsxs)(a.A,{sx:{display:"flex",gap:1},children:[(0,n.jsxs)(d.A,{component:"label",variant:"outlined",startIcon:(0,n.jsx)(y.A,{}),children:["Open File",(0,n.jsx)("input",{type:"file",accept:".json,.txt",hidden:!0,onChange:T})]}),(0,n.jsx)(d.A,{variant:"contained",color:"secondary",onClick:()=>{if(!t)return;let e=t.editor.getEditors()[0];e&&e.getAction("editor.action.formatDocument")?.run()},children:"Format JSON"})]})]}),(0,n.jsx)(a.A,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:(0,n.jsxs)(c.A,{value:w,onChange:(e,t)=>S(t),children:[(0,n.jsx)(u.A,{label:"Editor"}),(0,n.jsx)(u.A,{label:"Spreadsheet Grid"}),(0,n.jsx)(u.A,{label:"Visual Node Graph"})]})}),(0,n.jsxs)(a.A,{sx:{flex:1,display:"flex",gap:2,overflow:"hidden"},children:[(0,n.jsxs)(x.A,{variant:"outlined",sx:{flex:1,display:0===w?"flex":"none",flexDirection:"column",overflow:"hidden"},children:[(0,n.jsx)(a.A,{sx:{p:1,bgcolor:"background.default",borderBottom:1,borderColor:"divider"},children:(0,n.jsx)(s.A,{variant:"subtitle2",color:"text.secondary",children:"document.json"})}),(0,n.jsx)(a.A,{sx:{flex:1},children:(0,n.jsx)(h.Ay,{height:"100%",defaultLanguage:"json",theme:"dark"===e.palette.mode?"vs-dark":"light",value:r,onChange:e=>{let t=e||"";g(t),D.current&&clearTimeout(D.current),D.current=setTimeout(()=>{_(t)},1e3)},options:{minimap:{enabled:!0},scrollBeyondLastLine:!1,wordWrap:"on",formatOnPaste:!0,formatOnType:!0}})})]}),(0,n.jsx)(x.A,{variant:"outlined",sx:{flex:1,display:1===w?"flex":"none",flexDirection:"column",overflow:"hidden"},children:(()=>{try{let e=JSON.parse(r);return(0,n.jsx)(A,{data:e})}catch(e){return(0,n.jsx)(a.A,{sx:{p:3},children:(0,n.jsx)(f.A,{severity:"error",children:"Invalid JSON. Cannot render Grid View. Please fix syntax errors in the Editor."})})}})()}),(0,n.jsx)(x.A,{variant:"outlined",sx:{flex:1,display:2===w?"flex":"none",flexDirection:"column",overflow:"hidden",minHeight:0},children:(0,n.jsx)(a.A,{sx:{flex:1,minHeight:0,position:"relative"},children:(()=>{try{let e=JSON.parse(r);return(0,n.jsx)(k,{data:e})}catch(e){return(0,n.jsx)(a.A,{sx:{p:3},children:(0,n.jsx)(f.A,{severity:"error",children:"Invalid JSON. Cannot render Graph View. Please fix syntax errors in the Editor."})})}})()})}),(0,n.jsxs)(x.A,{variant:"outlined",sx:{width:"400px",display:"flex",flexDirection:"column",overflow:"hidden",p:2},children:[(0,n.jsx)(s.A,{variant:"h6",gutterBottom:!0,children:"WASM JQ Console"}),(0,n.jsx)(s.A,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Power-filter your objects using native `jq` syntax directly in the browser."}),(0,n.jsxs)(a.A,{sx:{display:"flex",gap:1,mb:2,alignItems:"center"},children:[(0,n.jsx)("input",{ref:O,defaultValue:".keys",onChange:B,onKeyDown:e=>{"Enter"===e.key&&P()},placeholder:"e.g. .features[] | select(. == 'Monaco')",style:{flex:1,padding:"8px 10px",fontFamily:"monospace",fontSize:"13px",background:"transparent",border:"1px solid rgba(128,128,128,0.3)",borderRadius:"4px",color:"inherit",outline:"none"}}),(0,n.jsx)(p.A,{onClick:P,color:"primary",sx:{border:"1px solid",borderColor:"divider"},children:(0,n.jsx)(m.A,{})})]}),(0,n.jsx)(s.A,{variant:"subtitle2",gutterBottom:!0,children:"Filter Result:"}),(0,n.jsxs)(a.A,{sx:{flex:1,bgcolor:"background.default",borderRadius:1,p:1,overflow:"auto",border:"1px solid",borderColor:"divider",position:"relative"},children:[(0,n.jsx)("pre",{style:{margin:0,fontSize:"13px",fontFamily:"monospace",whiteSpace:"pre-wrap",wordBreak:"break-all"},children:N||"No results."}),N&&(0,n.jsx)(p.A,{size:"small",sx:{position:"absolute",top:4,right:4,bgcolor:"background.paper"},onClick:()=>navigator.clipboard.writeText(N),children:(0,n.jsx)(j.A,{fontSize:"small"})})]})]})]})]}):null}}},e=>{e.O(0,[4177,6815,9429,5283,2903,6982,424,9100,3686,2543,636,6593,8792],()=>e(e.s=59650)),_N_E=e.O()}]);