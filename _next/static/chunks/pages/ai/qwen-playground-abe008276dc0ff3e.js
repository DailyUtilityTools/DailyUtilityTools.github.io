(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[870],{28792:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>E});var n=r(37876),a=r(14232),s=r(77328),i=r.n(s),o=r(69261),l=r(3606),c=r(49106),d=r(76686),x=r(82702),u=r(1521),h=r(9092),p=r(43453),m=r(53019),g=r(29351),y=r(75283),f=r(76815),b=r(22250),j=r(19538),v=r(55868),A=r(29190),w=r(60020),k=r(39706);function W({messages:e}){let t=(0,a.useRef)(null),r=(0,c.A)();return(0,a.useEffect)(()=>{t.current&&(t.current.scrollTop=t.current.scrollHeight)},[e]),(0,n.jsxs)(d.A,{ref:t,sx:{display:"flex",flexDirection:"column",p:2,width:"100%",height:"100%",overflowY:"auto",borderRadius:2,bgcolor:"dark"===r.palette.mode?"grey.900":"grey.50"},children:[0===e.length&&(0,n.jsxs)(d.A,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",opacity:.5},children:[(0,n.jsx)(d.A,{sx:{mb:2},children:(0,k.s)("Calculate",48)}),(0,n.jsx)(x.A,{variant:"h6",fontWeight:"medium",children:"Start a conversation"})]}),e.map((e,t)=>(0,n.jsx)(d.A,{sx:{display:"flex",mb:2,justifyContent:"assistant"===e.role?"flex-start":"flex-end"},children:(0,n.jsxs)(h.A,{elevation:1,sx:{maxWidth:"80%",borderRadius:4,px:2,py:1.5,bgcolor:"assistant"===e.role?"dark"===r.palette.mode?"grey.800":"background.paper":"primary.main",color:"assistant"===e.role?"dark"===r.palette.mode?"grey.100":"text.primary":"primary.contrastText",borderTopRightRadius:16*("user"!==e.role),borderTopLeftRadius:16*("assistant"!==e.role)},children:[(0,n.jsx)(x.A,{variant:"body1",sx:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:e.content}),"assistant"===e.role&&""===e.content&&(0,n.jsx)(d.A,{component:"span",sx:{display:"inline-block",width:8,height:16,verticalAlign:"middle",bgcolor:"grey.400",ml:1,animation:"pulse 1.5s infinite"}})]})},t))]})}var C=r(76392);function R({text:e,percentage:t,total:r}){let a=(0,c.A)();return(0,n.jsxs)(d.A,{sx:{width:"100%",mb:2},children:[(0,n.jsxs)(d.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:.5},children:[(0,n.jsx)(x.A,{variant:"caption",color:"text.secondary",noWrap:!0,sx:{maxWidth:"75%"},children:e}),(0,n.jsxs)(x.A,{variant:"caption",color:"text.secondary",children:[t?t.toFixed(0):0,"%"]})]}),(0,n.jsx)(C.A,{variant:"determinate",value:t||0,sx:{height:8,borderRadius:4,bgcolor:"dark"===a.palette.mode?"grey.800":"grey.200","& .MuiLinearProgress-bar":{borderRadius:4}}})]})}let S="u">typeof navigator&&!!navigator.gpu,P=["Solve the equation x^2 - 3x + 2 = 0","Lily is three times older than her son. In 15 years, she will be twice as old as him. How old is she now?","Write python code to compute the nth fibonacci number."];function I(){let e=(0,a.useRef)(null);(0,a.useRef)(null),(0,a.useRef)(null);let t=(0,c.A)(),s="u">typeof navigator&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),[i,o]=(0,a.useState)(null),[l,k]=(0,a.useState)(null),[C,I]=(0,a.useState)(""),[E,_]=(0,a.useState)([]),[D,N]=(0,a.useState)(!1),[T,F]=(0,a.useState)(""),[L,M]=(0,a.useState)([]),[B,G]=(0,a.useState)(null),[U,z]=(0,a.useState)(null),[q,H]=(0,a.useState)(!1);function O(e){M(t=>[...t,{role:"user",content:e}]),G(null),N(!0),F("")}return((0,a.useEffect)(()=>{e.current||(e.current=new Worker(r.tu(new URL(r.p+r.u(926),r.b)),{type:void 0}),e.current.postMessage({type:"check"}));let t=e=>{switch(e.data.status){case"loading":o("loading"),I(e.data.data);break;case"initiate":_(t=>[...t,e.data]);break;case"progress":_(t=>t.map(t=>t.file===e.data.file?{...t,...e.data}:t));break;case"done":_(t=>t.filter(t=>t.file!==e.data.file));break;case"ready":o("ready");break;case"start":M(e=>[...e,{role:"assistant",content:""}]);break;case"update":{let{output:t,tps:r,numTokens:n}=e.data;G(r),z(n),M(e=>{let r=[...e],n=r.at(-1);return n&&(r[r.length-1]={...n,content:n.content+t}),r})}break;case"complete":N(!1);break;case"error":k(e.data.data)}},n=e=>{console.error("Worker error:",e)};return e.current.addEventListener("message",t),e.current.addEventListener("error",n),()=>{e.current&&(e.current.removeEventListener("message",t),e.current.removeEventListener("error",n))}},[]),(0,a.useEffect)(()=>{0===L.filter(e=>"user"===e.role).length||L.at(-1)?.role!=="assistant"&&(G(null),e.current?.postMessage({type:"generate",data:{messages:L,reasonEnabled:q}}))},[L,D]),S)?(0,n.jsxs)(u.A,{maxWidth:"md",sx:{height:"calc(100vh - 140px)",display:"flex",flexDirection:"column",py:2},children:[null===i&&0===L.length&&(0,n.jsxs)(d.A,{sx:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:3},children:[(0,n.jsxs)(d.A,{sx:{textAlign:"center"},children:[(0,n.jsx)(A.A,{sx:{fontSize:64,color:"primary.main",mb:2}}),(0,n.jsx)(x.A,{variant:"h3",component:"h1",fontWeight:"bold",gutterBottom:!0,children:"Qwen3 WebGPU"}),(0,n.jsxs)(x.A,{variant:"subtitle1",color:"text.secondary",sx:{maxWidth:600},children:["A hybrid reasoning model that runs locally in your browser with WebGPU acceleration. Powered by ",(0,n.jsx)("a",{href:"https://huggingface.co/docs/transformers.js",target:"_blank",rel:"noreferrer",style:{color:t.palette.primary.main},children:"Transformers.js"}),"."]})]}),(0,n.jsxs)(h.A,{sx:{p:4,maxWidth:600,width:"100%",borderRadius:2},elevation:0,variant:"outlined",children:[(0,n.jsxs)(x.A,{variant:"body1",paragraph:!0,children:["You are about to download ",(0,n.jsx)("strong",{children:"Qwen3-0.6B"})," (~600MB). Includes ONNX Runtime Web. No data is sent to a server."]}),s&&(0,n.jsx)(p.A,{severity:"warning",sx:{mb:2},children:"Warning: iOS browsers (Safari, Chrome, etc.) have strict memory limits. If the page refreshes during download, the cache may roll back and require re-downloading. Close other tabs for best results."}),l&&(0,n.jsx)(p.A,{severity:"error",sx:{mb:2},children:l}),(0,n.jsx)(m.A,{variant:"contained",size:"large",fullWidth:!0,onClick:async()=>{if("u">typeof navigator&&navigator.storage&&navigator.storage.persist)try{await navigator.storage.persist()}catch(e){console.warn("Could not request persistent storage",e)}e.current?.postMessage({type:"load"}),o("loading")},disabled:null!==i||null!==l,children:"Load Model"})]})]}),"loading"===i&&(0,n.jsxs)(d.A,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",maxWidth:500,mx:"auto",width:"100%"},children:[(0,n.jsx)(x.A,{variant:"body1",gutterBottom:!0,align:"center",children:C}),E.map(({file:e,progress:t,total:r},a)=>(0,n.jsx)(R,{text:e,percentage:t,total:r},a))]}),"ready"===i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(d.A,{sx:{flex:1,overflow:"hidden",mb:2,display:"flex",flexDirection:"column"},children:[(0,n.jsx)(W,{messages:L}),0===L.length&&(0,n.jsx)(g.A,{direction:"column",spacing:1,sx:{mt:2,alignItems:"center"},children:P.map((e,t)=>(0,n.jsx)(y.A,{label:e,onClick:()=>O(e),variant:"outlined",sx:{cursor:"pointer",maxWidth:"100%"}},t))})]}),(0,n.jsx)(x.A,{variant:"caption",sx:{display:"block",textAlign:"center",minHeight:20,mb:1,color:"text.secondary"},children:B&&L.length>0&&(0,n.jsx)(n.Fragment,{children:D?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.A,{component:"span",sx:{fontWeight:"bold",color:"text.primary"},children:B.toFixed(2)})," tokens/second"]}):(0,n.jsxs)(n.Fragment,{children:["Generated ",U," tokens in ",(U/B).toFixed(2)," seconds (",B.toFixed(2)," tokens/s)."," ",(0,n.jsx)(d.A,{component:"span",sx:{textDecoration:"underline",cursor:"pointer",color:"primary.main"},onClick:()=>{e.current?.postMessage({type:"reset"}),M([])},children:"Reset"})]})})}),(0,n.jsxs)(h.A,{elevation:3,sx:{p:1,display:"flex",alignItems:"center",borderRadius:4},children:[(0,n.jsx)(f.A,{fullWidth:!0,variant:"standard",placeholder:"Type your message...",value:T,onChange:e=>F(e.target.value),onKeyDown:e=>{!(T.length>0)||D||"Enter"!==e.key||e.shiftKey||(e.preventDefault(),O(T))},disabled:"ready"!==i,InputProps:{disableUnderline:!0,sx:{px:2,py:1.5}},multiline:!0,maxRows:4}),(0,n.jsxs)(m.A,{size:"small",onClick:()=>H(!q),sx:{mr:1,minWidth:"auto",borderRadius:2,color:q?"primary.main":"action.disabled",bgcolor:q?"primary.lighter":"transparent",border:"1px solid",borderColor:q?"primary.light":"transparent",display:"flex",flexDirection:"column",alignItems:"center",textTransform:"none",p:.5,lineHeight:1},children:[(0,n.jsx)(w.A,{fontSize:"small"}),(0,n.jsx)(x.A,{variant:"caption",sx:{fontSize:"0.6rem"},children:"Reason"})]}),D?(0,n.jsx)(b.A,{color:"error",onClick:function(){e.current?.postMessage({type:"interrupt"})},children:(0,n.jsx)(v.A,{})}):(0,n.jsx)(b.A,{color:"primary",onClick:()=>O(T),disabled:!T||"ready"!==i,children:(0,n.jsx)(j.A,{})})]}),(0,n.jsx)(x.A,{variant:"caption",align:"center",display:"block",color:"text.disabled",sx:{mt:1},children:"Generated content may be inaccurate."})]})]}):(0,n.jsxs)(d.A,{sx:{height:"calc(100vh - 200px)",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,n.jsx)(x.A,{variant:"h5",color:"error",align:"center",gutterBottom:!0,children:"WebGPU is not supported"}),(0,n.jsx)(x.A,{color:"text.secondary",align:"center",children:"Please use a modern browser that supports WebGPU."})]})}function E(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(i(),{children:[(0,n.jsx)("title",{children:"Qwen3 AI Playground - Calculator Pro"}),(0,n.jsx)("meta",{name:"description",content:"Experiment with Qwen3-0.6B AI model directly in your browser using WebGPU."}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,n.jsxs)("div",{className:"app-container",children:[(0,n.jsx)(o.A,{}),(0,n.jsx)("div",{className:"app-layout",style:{maxWidth:"100%",padding:0},children:(0,n.jsx)("main",{className:"app-main-content",style:{width:"100%",padding:0,display:"flex",justifyContent:"center"},children:(0,n.jsx)(I,{})})}),(0,n.jsx)(l.w,{})]})]})}},83452:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/ai/qwen-playground",function(){return r(28792)}])}},e=>{e.O(0,[961,7571,6815,9429,3348,7155,8230,5283,203,1535,9118,3324,636,6593,8792],()=>e(e.s=83452)),_N_E=e.O()}]);