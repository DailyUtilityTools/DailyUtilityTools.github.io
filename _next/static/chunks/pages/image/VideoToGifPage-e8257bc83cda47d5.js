(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[395],{43202:(e,t,i)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/image/VideoToGifPage",function(){return i(79423)}])},79423:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>w});var n=i(37876),r=i(14232),l=i(1521),a=i(82702),s=i(76686),o=i(9092),d=i(53019),c=i(69750),x=i(38901),h=i(87210),u=i(83621),m=i(84252),j=i(79850),p=i(95927),g=i(76392),v=i(25732),f=i(37260),A=i(60868),y=i(57109),b=i.n(y);function w(){let[e,t]=(0,r.useState)(null),[i,y]=(0,r.useState)(null),[w,F]=(0,r.useState)(0),[S,C]=(0,r.useState)(0),[k,I]=(0,r.useState)(5),[L,R]=(0,r.useState)(10),[W,_]=(0,r.useState)(320),[E,P]=(0,r.useState)(!1),[D,N]=(0,r.useState)(0),G=(0,r.useRef)(null),T=(0,r.useRef)(null),M=async()=>{let e=G.current,t=T.current;if(!e||!t)return;P(!0),N(0),y(null);let i=e.videoWidth/e.videoHeight;t.width=W,t.height=W/i;let n=t.getContext("2d",{willReadFrequently:!0});if(!n)return void P(!1);let r=new(b())({workers:2,quality:10,workerScript:"https://cdnjs.cloudflare.com/ajax/libs/gif.js/0.2.0/gif.worker.js",width:t.width,height:t.height});r.on("progress",e=>{N(100*e)}),r.on("finished",e=>{y(URL.createObjectURL(e)),P(!1),N(100)}),e.currentTime=S,await new Promise(t=>{let i=()=>{e.removeEventListener("seeked",i),t(!0)};e.addEventListener("seeked",i)});let l=1e3/L,a=Math.floor((k-S)*L);for(let i=0;i<=a;i++)n.drawImage(e,0,0,t.width,t.height),r.addFrame(n,{copy:!0,delay:l}),e.currentTime=S+i/L,await new Promise(t=>{let i=()=>{e.removeEventListener("seeked",i),t(!0)};e.addEventListener("seeked",i)});r.render()};return(0,n.jsxs)(l.A,{maxWidth:"lg",sx:{mt:4,mb:4},children:[(0,n.jsx)(a.A,{variant:"h4",gutterBottom:!0,children:"Video to GIF Converter"}),(0,n.jsx)(a.A,{variant:"body1",color:"text.secondary",paragraph:!0,children:"Turn any video clip into a shareable GIF entirely in your browser. No files are uploaded to our servers."}),(0,n.jsxs)(s.A,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:4},children:[(0,n.jsxs)(o.A,{sx:{p:4,flex:1,minWidth:{md:"380px"},height:"fit-content"},children:[(0,n.jsx)(s.A,{sx:{mb:4},children:(0,n.jsxs)(d.A,{variant:e?"outlined":"contained",component:"label",startIcon:(0,n.jsx)(v.A,{}),size:"large",fullWidth:!0,children:[e?"Upload Different Video":"Select Video (MP4, WebM)",(0,n.jsx)("input",{type:"file",hidden:!0,accept:"video/*",onChange:e=>{let i=e.target.files?.[0];i&&(t(URL.createObjectURL(i)),y(null),N(0),C(0),I(5))}})]})}),(0,n.jsx)(c.A,{sx:{my:3}}),(0,n.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Clip Selection"}),(0,n.jsxs)(s.A,{sx:{mb:4,px:2},children:[(0,n.jsxs)(a.A,{variant:"body2",color:"text.secondary",sx:{mb:4},children:["Trim: ",S.toFixed(1),"s to ",k.toFixed(1),"s (Duration: ",(k-S).toFixed(1),"s)"]}),(0,n.jsx)(x.Ay,{value:[S,k],min:0,max:w||100,step:.1,onChange:(e,t)=>{let[i,n]=t;C(i),I(n),G.current&&(G.current.currentTime=i)},disabled:!e||E,valueLabelDisplay:"on",valueLabelFormat:e=>`${e.toFixed(1)}s`,disableSwap:!0}),w>0&&k-S>10&&(0,n.jsx)(h.A,{severity:"warning",sx:{mt:2},children:"Longer clips (10s+) may take a while to process and result in large files."})]}),(0,n.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"GIF Quality"}),(0,n.jsxs)(s.A,{sx:{display:"flex",gap:2,mb:4},children:[(0,n.jsxs)(u.A,{fullWidth:!0,disabled:!e||E,children:[(0,n.jsx)(m.A,{children:"Frame Rate"}),(0,n.jsxs)(j.A,{value:L,label:"Frame Rate",onChange:e=>R(Number(e.target.value)),children:[(0,n.jsx)(p.A,{value:5,children:"5 FPS (Choppy, Small)"}),(0,n.jsx)(p.A,{value:10,children:"10 FPS (Normal)"}),(0,n.jsx)(p.A,{value:15,children:"15 FPS (Smooth)"}),(0,n.jsx)(p.A,{value:20,children:"20 FPS (Very Smooth, Large)"})]})]}),(0,n.jsxs)(u.A,{fullWidth:!0,disabled:!e||E,children:[(0,n.jsx)(m.A,{children:"Resolution Width"}),(0,n.jsxs)(j.A,{value:W,label:"Resolution Width",onChange:e=>_(Number(e.target.value)),children:[(0,n.jsx)(p.A,{value:240,children:"240px (Small)"}),(0,n.jsx)(p.A,{value:320,children:"320px (Medium)"}),(0,n.jsx)(p.A,{value:480,children:"480px (Large)"}),(0,n.jsx)(p.A,{value:640,children:"640px (HD, Very Large)"})]})]})]}),(0,n.jsx)(d.A,{variant:"contained",color:"primary",size:"large",startIcon:(0,n.jsx)(A.A,{}),onClick:M,disabled:!e||E,fullWidth:!0,sx:{mb:2},children:E?"Converting...":"Convert to GIF"}),E&&(0,n.jsxs)(s.A,{sx:{width:"100%",mt:2},children:[(0,n.jsxs)(a.A,{variant:"caption",color:"text.secondary",gutterBottom:!0,display:"block",align:"center",children:["Rendering Frames and Encoding... ",D.toFixed(0),"%"]}),(0,n.jsx)(g.A,{variant:"determinate",value:D})]}),i&&!E&&(0,n.jsx)(d.A,{variant:"outlined",color:"success",size:"large",startIcon:(0,n.jsx)(f.A,{}),onClick:()=>{if(!i)return;let e=document.createElement("a");e.download="converted_clip.gif",e.href=i,document.body.appendChild(e),e.click(),document.body.removeChild(e)},fullWidth:!0,children:"Download GIF"})]}),(0,n.jsx)(o.A,{sx:{p:0,flex:2,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"400px",bgcolor:"#f8f9fa"},children:e?(0,n.jsxs)(s.A,{sx:{width:"100%",height:"100%",p:2,display:"flex",flexDirection:"column",gap:2,alignItems:"center"},children:[(0,n.jsx)(s.A,{sx:{width:"100%",display:i?"none":"flex",justifyContent:"center"},children:(0,n.jsx)("video",{ref:G,src:e,style:{maxWidth:"100%",maxHeight:"60vh",backgroundColor:"black"},controls:!0,onLoadedMetadata:()=>{G.current&&(F(G.current.duration),I(Math.min(5,G.current.duration)))}})}),i&&(0,n.jsxs)(s.A,{sx:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,n.jsx)(a.A,{variant:"subtitle2",color:"success.main",sx:{mb:1},children:"Done! Preview your GIF below:"}),(0,n.jsx)("img",{src:i,alt:"Result GIF",style:{maxWidth:"100%",maxHeight:"60vh",objectFit:"contain",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}})]})]}):(0,n.jsxs)(s.A,{sx:{textAlign:"center",color:"text.secondary",p:4},children:[(0,n.jsx)(A.A,{sx:{fontSize:64,mb:2,opacity:.5}}),(0,n.jsx)(a.A,{variant:"h6",children:"No video selected"}),(0,n.jsx)(a.A,{variant:"body2",children:"Upload a video to create a GIF"})]})})]}),(0,n.jsx)("canvas",{ref:T,style:{display:"none"}})]})}}},e=>{e.O(0,[3372,8284,8901,2850,636,6593,8792],()=>e(e.s=43202)),_N_E=e.O()}]);