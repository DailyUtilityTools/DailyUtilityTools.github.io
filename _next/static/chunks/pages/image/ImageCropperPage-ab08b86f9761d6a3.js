(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6089],{65154:(e,t,i)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/image/ImageCropperPage",function(){return i(82385)}])},82385:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>y});var n=i(37876),r=i(14232),a=i(1521),l=i(82702),o=i(76686),s=i(9092),c=i(53019),d=i(69750),h=i(45342),x=i(80169),u=i(88376),g=i(87210),m=i(25732),p=i(37260),f=i(95145),j=i(24228);function A(e,t,i){return(0,j.ge)((0,j.dS)({unit:"%",width:90},i,e,t),e,t)}function y(){let[e,t]=(0,r.useState)(""),i=(0,r.useRef)(null),[y,v]=(0,r.useState)(),[w,b]=(0,r.useState)(),[C,k]=(0,r.useState)(void 0),_=(0,r.useRef)(null),[S,I]=(0,r.useState)(!1),D=e=>{k(e),i.current&&v(A(i.current.width,i.current.height,e))},W=async()=>{if(!w||!i.current||!_.current)return;I(!0);let e=i.current,t=_.current,n=e.naturalWidth/e.width,r=e.naturalHeight/e.height,a=t.getContext("2d");if(!a)return void I(!1);let l=window.devicePixelRatio||1;t.width=Math.floor(w.width*n*l),t.height=Math.floor(w.height*r*l),a.scale(l,l),a.imageSmoothingQuality="high";let o=w.x*n,s=w.y*r;a.save(),a.translate(-o,-s),a.drawImage(e,0,0,e.naturalWidth,e.naturalHeight,0,0,e.naturalWidth,e.naturalHeight),a.restore();let c=t.toDataURL("image/png"),d=document.createElement("a");d.download="cropped_image.png",d.href=c,document.body.appendChild(d),d.click(),document.body.removeChild(d),I(!1)};return(0,n.jsxs)(a.A,{maxWidth:"lg",sx:{mt:4,mb:4},children:[(0,n.jsx)(l.A,{variant:"h4",gutterBottom:!0,children:"Image Cropper"}),(0,n.jsx)(l.A,{variant:"body1",color:"text.secondary",paragraph:!0,children:"Crop your images natively in the browser. Select custom aspect ratios like 16:9 or 1:1, drag to select the perfect frame, and extract the resulting image."}),(0,n.jsxs)(o.A,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:4},children:[(0,n.jsxs)(s.A,{sx:{p:4,flex:1,minWidth:{md:"350px"},height:"fit-content"},children:[(0,n.jsx)(o.A,{sx:{mb:4,display:"flex",flexDirection:"column",alignItems:"center"},children:(0,n.jsxs)(c.A,{variant:e?"outlined":"contained",component:"label",startIcon:(0,n.jsx)(m.A,{}),size:"large",fullWidth:!0,children:[e?"Upload Different Image":"Select Image",(0,n.jsx)("input",{type:"file",hidden:!0,accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files.length>0){v(void 0);let i=new FileReader;i.addEventListener("load",()=>t(i.result?.toString()||"")),i.readAsDataURL(e.target.files[0])}}})]})}),(0,n.jsx)(d.A,{sx:{my:3}}),(0,n.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"Crop Settings"}),(0,n.jsx)(h.A,{control:(0,n.jsx)(x.A,{checked:!!C,onChange:e=>{e.target.checked?(k(1),i.current&&v(A(i.current.width,i.current.height,1))):k(void 0)},disabled:!e}),label:"Lock Aspect Ratio",sx:{mb:1}}),(0,n.jsxs)(o.A,{sx:{mb:3},children:[(0,n.jsx)(l.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Presets:"}),(0,n.jsxs)(u.A,{variant:"outlined",size:"small",disabled:!C||!e,children:[(0,n.jsx)(c.A,{onClick:()=>D(1),variant:1===C?"contained":"outlined",children:"1:1"}),(0,n.jsx)(c.A,{onClick:()=>D(16/9),variant:C===16/9?"contained":"outlined",children:"16:9"}),(0,n.jsx)(c.A,{onClick:()=>D(4/3),variant:C===4/3?"contained":"outlined",children:"4:3"}),(0,n.jsx)(c.A,{onClick:()=>D(9/16),variant:C===9/16?"contained":"outlined",children:"9:16"})]})]}),(0,n.jsx)(g.A,{severity:"info",sx:{mb:4},children:"Draw a selection on the image preview to define your crop area."}),(0,n.jsx)(c.A,{variant:"contained",color:"primary",size:"large",startIcon:(0,n.jsx)(p.A,{}),onClick:W,disabled:!e||!w?.width||!w?.height||S,fullWidth:!0,children:S?"Cropping...":"Download Cropped Image"})]}),(0,n.jsx)(s.A,{sx:{p:4,flex:2,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"400px",bgcolor:"#f8f9fa"},children:e?(0,n.jsx)(o.A,{sx:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:(0,n.jsx)(o.A,{sx:{maxWidth:"100%",maxHeight:"65vh",overflow:"auto",border:"1px dashed #ccc",p:1,bgcolor:"white"},children:(0,n.jsx)(j.Ay,{crop:y,onChange:(e,t)=>v(t),onComplete:e=>b(e),aspect:C,children:(0,n.jsx)("img",{ref:i,alt:"Crop process",src:e,onLoad:e=>{if(C){let{width:t,height:i}=e.currentTarget;v(A(t,i,C))}},style:{maxWidth:"100%",height:"auto",display:"block"}})})})}):(0,n.jsxs)(o.A,{sx:{textAlign:"center",color:"text.secondary"},children:[(0,n.jsx)(f.A,{sx:{fontSize:64,mb:2,opacity:.5}}),(0,n.jsx)(l.A,{variant:"h6",children:"No image selected"}),(0,n.jsx)(l.A,{variant:"body2",children:"Upload an image to start cropping"})]})})]}),(0,n.jsx)("canvas",{ref:_,style:{display:"none"}})]})}i(90481)}},e=>{e.O(0,[8284,6982,9356,4964,636,6593,8792],()=>e(e.s=65154)),_N_E=e.O()}]);